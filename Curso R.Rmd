---
title: "Curso R"
author: "Bruno R Ribeiro"
date: "April 11, 2017"
output:
  pdf_document:
    toc: yes
  html_document:
    toc: yes
    toc_float: yes
  word_document:
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Sumário 

### Parte 1 - Introducao
* O que e R
* Vantagens e desvantagens
* Baixando e instalando o R
* Uma impressão inicial
* Como instalar e carregar um pacote
* Nomear objetos
* Como usar funções
* Como e onde obter ajuda


### Parte 2 - Primeiros passos
- Tipos básicos de dados usados em R (números, caracteres,lógicos, valores especiais)
- Principais classes de objetos usados em R
- vetores
- Matrizes
- Data frame
- Listas


# Parte 1 - Introducao
## Para quem esta apostila é escrita?
Esta apostila é destinada a pessoas que nunca tiveram nenhum contado prévio com o R ou para 
aquelas pessoas que desejam aperfeiçoar seus conhecimentos básicos. Não temos a intenção de  
ir a fundo em assuntos complexos e avançados de programação e estatística. 
Alias, este não e um curso de estatística. Apesar de R ser um software para tal fim, 
acreditamos que o aprendizado da linguagem básica de programação em R não deve ser ministrado em conjunto com 
um curso de estatística. 

Ser um bom usuário do R requer prática, paciência e perseverança. Esta frase pode soar desmotivadora a à primeira vista, porém, não e. Adquirimos conhecimento sobre algo mais naturalmente se tivermos estas
virtudes em mente. Aprender R talvez seja como aprender a tocar violão. É claro que você não conseguirá
tocar a quinta sinfonia de Beethoven com apenas uma semana de aula. Primeiro e importante conhecer as partes do
violão, suas cordas, como posicionar os dedos, e começar a praticar. Juntamente com a pratica e fundamental 
o conhecimento da teoria musical, para dar significado a pratica. As primeiras aulas são sempre mais difíceis. 
Os dedos doem, ha o sentimento de que você não vai conseguir, a teoria e chata, etc. Aprender o R e como aprender 
a tocar violão. Você ira passar pela etapa de conhecer a logica de programação e o funcionamento do R, 
aprender seus conceitos básicos, se entusiasmar e também pensar em desistir quando achar
que o R e muito chato e que não vale a pena "perder tempo" aprendo algo que você pode fazer rapidamente no Excel. 
Mas calma, respire! Todo o tempo investido no inicio em aprender o R vale a pena. Assim como aprender a tocar violão, 
com o tempo você ficara familiarizado com os comandos básicos e as coisas ficarão mais simples. 
Não esperamos que nesse curso inicial que você seja um bom programador, da mesma forma que em apenas uma 
semana de aula de violão você consiga tocar quinta sinfonia de Beethoven. Nesse curso você irá aprender
o básico sobre o R e sua linguagem; seguindo a analogia com o violão,  esperamos que após esse curso que você consiga tocar
"pra não dizer que não falei de flores" e "Bloowing in the wind", canções que a maioria dos alunos aprendem no inicio


### O que é o R?


### Vantagens e desvantagens


### Baixando e instalando o R
Para fazer o download o programa siga os seguintes passos:

1. na pagina https://www.r-project.org/ clique;
2. "download R";
3. escolha um Cran do Brasil;
4. escolha fazer download do programa para Linux, Mac ou Windows; 
5. clique em "install R for the first time" e, por fim em;
6. "Download R 3.3.3 for Windows";
Proceda com a instalação do programa

O Rstudio oferece opções visuais que facilitam o aprendizado e a escrita de códigos. Assim, recomendo fortemente
que você use o Rstudio. 
Mas ainda assim e preciso ter o R instalado.

1. Faca o download do RStudio em https://www.rstudio.com/products/rstudio/download/;
2. escolha fazer download do programa para Linux, Mac, Windows ou Fedora;


### Uma impressao inicial
**Janela Script**
Um script é uma sequencia de comandos para serem executados por um programa e ficam gravados em um arquivo. Usamos um script para escrever e salvar nossos códigos.

Para criar um novo script ou carregar um script 
1. "File" 
2. "New File" ou "Open File"
3. R Script
4. Para salva-lo, clique no disquete.


*janela console* 
```{r}
12 + 23 # soma de dois números
```


**Janela Environment**
Local (memória) para guardar variáveis
```{r}
exemplo <- "Meus dados"
rm(exemplo)
```


**Janela de resultados gráficos**
files: os arquivos e pastas da área default
plots: Visualização de gráficos e imagens
```{r}
plot(1:10, 1:10) # janela plots
```

```{r}
x <- seq(5, 15, length = 1000)
y <- dnorm(x, mean = 10, sd = 3)
plot(x, y, type = "l", lwd = 1)
```



### Como instalar e carregar um pacote
As funções do R são escritas e disponibilizadas na forma de "pacotes". Um pacote geralmente e criado para um fim especifico e contem um conjunto de funções. Por exemplo, o pacote "ggplot2" contem  funções para criar e manipular gráficos. 


```{r eval = FALSE}
install.packages("raster") # comando para instalar o pacote raster
library(raster)            # comando para carregar o pacote raster
```

Uma vez instalados, os pacotes ficam armazenados na memoria do computador. Entretanto, com exceção dos pacotes básicos do R, ao iniciar uma nova seção do sempre temos que carregar  os pacotes que iremos usar usando a função library(...)
*Dica:* mantenha no inicio do script uma lista de pacotes que devem ser carregados. Por exemplo:

```{r eval = FALSE}
install.packages("raster") # lembre - se:uma vez instalado nao e necessario instalar o pacote novamente quando abrir o R
install.packages("maptolls")
install.packages("vegan")

library(raster)  # lembre-se:e preciso carregar os pacotes toda vez que inicar o RStudio
library(maptools)
library(vegan)
```


### Como criar um objeto
Variáveis, dados, funções, resultados são armazenados no R na forma de objetos que possuem um nome. Estes
objetos podem ser manipulados por de operações (aritmética, lógica, comparações) e funções. Por exemplo, na linha de 
comando abaixo o objeto com nome "a" armazena a informação "2", um vetor numérico.

Utilizamos o sinal "<-" para atribuir uma informação a um objeto   
```{r}
a <- 1
soma <- 45 * 765
```

Um exemplo de uma funcao armazenada no objeto "x
```{r}
x <- function(a) {
  a + 5
}
x(a)
```

Note que sempre que um novo objeto é criado ele é armazenado no "Environment" (Parte direita superior da tela).
Para rodar o código acima basta colocar o curso em cima da linha do código e clicar em **Run** ou **Ctrl + Enter**. 
Note que quando executamos um código o resultado é mostrado no "Console" (Parte inferior da tela). 
Para visualizar o conteúdo de um objeto basta executar apenas seu nome. 

Quando digitamos "a", temos o seguinte resultado:
```{r}
a # O numero entre parenteses indica posicao dos elementos do objeto
```

Importante, o nome de todos os objetos deve sempre começar como uma letra e pode incluir outros caracteres
números, underline (_) e ponto (.). Além disso, o R diferencia entre letras maiúsculas e minúsculas. Faça o teste, execute os seguintes comandos: 


```{r}
a
```

```{r eval= FALSE}
A # Este erro ocorre porque o objeto "A" nao existe
```

**Dica:** Use Hashtag (#) para fazer anotações. As linhas de comando que começam com "#" não são executadas.
**Mais uma dica:** não use acentos e caracteres especiais tais como cedilha, tiu, barras, etc, ao escrever seus códigos

Usamos a funcao "c" para concatenar (agrupar) caracteres ou números em um vetor. Os elementos de um vetor devem estar dentro de parênteses () e separados por vírgula (,) 
```{r}
i <- 1234
ii <- c(1234, 73455)
letras <- c("este", 'e', 'um', 'vetor', 'de', 'caracteres') 
amigos <-c("nelson", "guilherme", "andre")
idade <- c(27, 38, 26)
```

Nomear um objeto é importante. Note que a linha de comando abaixo não foi salva
```{r results='hide'}
matrix((((sqrt(1234*2)^2)/3*18/3-23)^2) * (((sqrt(1234*2)^2)/3*18/3-23)/12),4,5)
```

Agora o resultado é salvo na forma de um objeto
```{r results='hide'}
mat <- matrix((((sqrt(1234*2)^2)/3*18/3-23)^2) * (((sqrt(1234*2)^2)/3*18/3-23)/12),4,5)
```


## Faça você mesmo ##

Crie um objeto chamado "b" e salve o valor 15 nesse objeto
```{r}
b <- 15
```

* crie um objeto chamado "c" e grave o valor de 0.1
* crie um objeto chamado "d" e grave o valor de 0,1
* crie um objeto chamado "e" e grave o valor de 10 + 2
* crie um objeto chamado "E" e grave o valor de 20 * 3
* grave a soma do objeto "e"" e "E"" em um vetor chamado "resul"

**Dica:** sempre use ponto ao invés de vírgula para escrever números não inteiros

Escrever em R e como escrever uma receita para outra pessoa, vc tem que dar todos os passos na ordem certa,
senão a receita provavelmente não vai funcionar.
Por exemplo, vamos escrever passo-a-passo como calcular a media do objeto "idade":

Tenha em mente que media nada mais e do que a soma dos valores divido pelo numero de valores. Sendo assim precisamos:

1. somar todos os valores do objeto idade
2. dividir a soma dos valores por 3

```{r}
soma.idade <- 27 + 38 + 26
soma.idade
```


```{r}
media <- soma.idade / 3
media
```


O R tambem possui funções pré-definidas. Tente a seguinte função:
```{r}
mean(idade)
```


### Como e onde obter ajuda
É rotineiro no início (e não apenas no inicio...) não saber como escrever ou usar uma funcao. Para isso, existem
vários materias de ajuda disponíveis no próprio R e também muitos materiais disponíveis online.  
Vamos aprender como pedir ajuda!

```{r}
?mean() # veja a pagina de ajuda da função "media"
```

Veja que na aba "Help" surgiu o arquivo de ajuda na função "mean". De forma geral, o arquivo de ajuda contem:

* _Description_: uma descrição da função
* _Usage_: o nome da função e seus possíveis argumentos. Nem todos argumentos precisam serem inseridos na função para que ela funcione. Além disso,você pode mudar um argumento de acordo com as opções oferecidas pela função;
* _Details_: uma descrição detalhada da função;
* _Value_: Diferente das informações acima, o essa seção não e comum em todas funções do R. Neste caso, ela indica uma
descrição dos argumentos da função;
* _See also_: página de ajuda de funções similares a que você esta usando;
* _Examples_: Exemplos executáveis do uso da função. Dica: copie e cole este exemplos no script e execute cada linha para aprender de forma mais detalhada como usar a função.

Além dos arquivos de ajuda próprios do R, existem muitos materiais de ajuda online. Caso você tenha dúvida sobre uma uma
função, sobre como resolver um erro que surgiu, ou ainda se não tiver a mínima ideia de como fazer algo no R, digite no Google _"Using mean funcion in r"_. Sei que soa como clichê, mas realmente ajuda. Além disso, o site **"Stack Overflow"** é uma excelente fonte de respostas sobre suas dúvidas. Tente _"How to calculate mean of a vector in r?"_


### Parte 1 - Exercícios
1. Instale e carregue o pacote "LetsR" no seu computador.    
2. Crie um objeto com nome "num" com números de 1 a 10.    
3. Crie um objeto com nome "letras" com cinco nomes diferentes.    
4. Calcule a media do objeto "num".  
6. Qual a soma de 2665 mais 7554. Salve o resultado em um objeto.  
7. Crie um objeto com nome "vec.2" com seguintes valores (1,15,25,30,NA,50,51,NA,48). Use o arquivo de ajuda
da função usada para calcular a soma (sum) desses valores e para excluir os valores "NA".  
8. Use a função length() no objeto vec.2. O que significa o valor retornado?  
9. Crie um objeto com nome "r" contendo os números 1,2 e 3 repetidos 100 vezes (ex. 1,2,3,1,2,3...).Dica: use a função
"rep" para resolver este exercício.  

